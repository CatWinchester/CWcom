<!DOCTYPE html>

<html lang="en" >
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="mainMenu.css" />
    <link rel="stylesheet" type="text/css" href="css/grid.css" />
    <script src="js/knockout-2.3.0.js" ></script>
    <title>Blog Test</title>
</head>
<body>
    <header>
        <div id="main_menu">
            <ul>
                <li>
                    <a href="index.html">Home</a>
                </li>
                <li>
                    <a href="portfolio.html">Portfolio</a>
                </li>
                <li class="active">
                    <a href="blog.html">Blog</a>
                </li>
            </ul>
        </div>
    </header>

    <div id="content">

    <div class="section group" id="top_row">

		<div class="col span_1_of_4">			    
	        <div class="post">
                <div class="post_content">
		            <h3>Day 5</h3>
                    <h4>Node.js or something new...</h4>
                    <img src="content/images/5.jpg" />                    
                </div>
	        </div>
		</div>

		<div class="col span_1_of_4">			    
	        <div class="post">
                <div class="post_content">
		            <h3>Day 5</h3>
                    <h4>Node.js or something new...</h4>
                    <img src="content/images/5.jpg" />                    
                </div>
	        </div>
		</div>

		<div class="col span_1_of_4">			    
	        <div class="post">
                <div class="post_content">
		            <h3>Day 5</h3>
                    <h4>Node.js or something new...</h4>
                    <img src="content/images/5.jpg" />                    
                </div>
	        </div>
		</div>

		<div class="col span_1_of_4">			    
	        <div class="post">
                <div class="post_content">
		            <h3>Day 5</h3>
                    <h4>Node.js or something new...</h4>
                    <img src="content/images/5.jpg" />                    
                </div>
	        </div>
		</div>
    </div>

    <div class="section group" id="main_row" data-bind="foreach: mainRowPosts">
        <div class="col span_1_of_4" >
	        <div class="post">
                <div class="post_content" >
		            <h2 data-bind="text: day"></h2>
                    <img src="content/images/1.jpg" />

                    <p>Drawing is a means of making an image, using any of a wide variety 
                       of tools and techniques. It generally involves making marks on a
                       surface by applying pressure from a tool, or moving a tool across 
                       a surface."</p>

                    <div class="read_more_link">
                        <a href="#">Read more </a>
                    </div>
                </div>
	        </div>
        </div>
    </div> 
        
    <div class="section group" id="bottom_row" data-bind="foreach: bottomRowPosts">
        <div class="col span_1_of_4">
	        <div class="post">
                <div class="post_content">
		            <h3 data-bind="text: day"></h3>
                    <h4>Node.js or something new...</h4>
                    <img src="content/images/5.jpg" />                    
                </div>
            </div>
	    </div> 
    </div>   
    
    </div>

    <div id="background"></div>
    <div id="midground"></div>
    <div id="foreground"></div>

    <script>
        function Post(day, header, description, image) {
            this.day = day;
            this.header = header;
            this.description = description;
            this.image = image;
        }

        function BlogViewModel() {
            var self = this;

            var numberOfItemsInRow = 4;

            self.selectedRow = ko.observable();
            self.bottomRow = ko.observable();

            self.posts = ko.observableArray();

            self.mainRowPosts = ko.computed(function () {
                var foundPosts = [];

                for (var i = numberOfItemsInRow * self.selectedRow() ;
                         i < numberOfItemsInRow * self.selectedRow() + numberOfItemsInRow && i < self.posts().length;
                         i++) {
                    foundPosts.push(self.posts()[i]);
                }

                return foundPosts;
            });

            self.bottomRowPosts = ko.computed(function () {
                var bottomPosts = [];

                for (var i = numberOfItemsInRow * self.bottomRow();
                         i < numberOfItemsInRow * self.bottomRow() + numberOfItemsInRow && i < self.posts().length;
                         i++) {
                    bottomPosts.push(self.posts()[i]);
                }

                return bottomPosts;
            });
        }

        var vm = new BlogViewModel();

        for (var i = 1; i <= 100; i++) {
            vm.posts().push(new Post(i,
                                     "Node.js or something new..",
                                     "Architecture is the art and science of designing buildings and structures. The word architecture comes from the Greek arkhitekton, \"master builder, director of works\"",
                                     "content/images/5.jpg"));
        }
		
        vm.selectedRow(0);
        vm.bottomRow(1);

        ko.applyBindings(vm);        
    </script>
</body>
</html>